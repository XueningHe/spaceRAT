---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
    collapse = TRUE,
    comment = "#>",
    fig.path = "man/figures/README-",
    out.width = "100%"
)
```
# spaceRAT <img src="inst/spaceRAT.png" width="200" align="right" />

<!-- badges: start -->
[![Lifecycle: experimental](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)
<!-- badges: end -->


## Install from GitHub
``` {r install, eval = FALSE}
# Install using devtools
# install.packages("devtools")
devtools::install_github("XueningHe/spaceRAT", build_vignettes = TRUE)
```

## View vignettes

``` {r vignettes, eval = FALSE}
browseVignettes(package = "spaceRAT")
```

## Usage

It takes two steps to perform ranked analysis of transcriptome:

1. build a scaffold space
2. project your new samples onto the scaffold. 

Example code will be provided here to illustrate each.
Additional information can be found in the vignettes.

### Build a scaffold space

There are two ways to get a scaffold space.
You can either obtain the prebuilt DMAP or GTEX space, or build a
scaffold space of your own, by passing as arguments a count matrix,
a phenotype table, an a column name of the phenotype table
to function `buildScaffold()`.  
  
Build as space with example data:
```{r build} 
library(spaceRAT)
data("exprs_dmap", "pData_dmap", package="spaceRATScaffolds")
scaffold <- buildScaffold(
    exprs_dmap, pheno = pData_dmap,
    colname = "cell_types", data = "logged")
plotScaffold(
    scaffold, title = "Scaffold Plot",
    dim_reduction = "PCA", dims = c(1,2), plot_mode = "dot")
```


### Project new samples

Get a list of available prebuilt scaffolds with:

```{r list_scaffolds} 
library("spaceRATScaffolds")
listScaffolds()
```

Project a sample of interest into a custom built or prebuilt scaffold:

```{r project}
# Load count data
data("counts_ilaria", package="spaceRATScaffolds")

# Load custom or prebuilt scaffold
scaffold <- buildScaffold("DMAP_scaffold")

# Project sample
projectSample(
    space = scaffold,
    sample = counts_ilaria, dims = c(1,2),
    title = "Samples projected into DMAP scaffold")
```

